<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Аэродруг — чат (демо)</title>

  <style>
    :root{
      /* Фон как в макете */
      --bgTop:#0b4f87;
      --bgMid:#083a6d;
      --bgBot:#062a55;

      /* Токены UI */
      --text:#fff;
      --muted:rgba(255,255,255,.70);

      --bubble-bot: rgba(255,255,255,.14);
      --bubble-user:#f28a2a;

      --stroke: rgba(255,255,255,.14);

      --input-bg: rgba(255,255,255,.16);
      --input-stroke: rgba(255,255,255,.16);

      --btn-bg: rgba(255,255,255,.10);
      --btn-stroke: rgba(255,255,255,.18);

      --radius:18px;

      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);

      --header-h: 88px;
      --composer-h: 92px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 900px at 35% 25%, var(--bgTop) 0%, var(--bgMid) 45%, var(--bgBot) 100%);
      overflow:hidden;
    }

    .app{
      height:100%;
      display:flex;
      flex-direction:column;
    }

    /* ===== Header ===== */
    header{
      height: calc(var(--header-h) + var(--safe-top));
      padding: calc(14px + var(--safe-top)) 18px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(0,0,0,.14), rgba(0,0,0,0));
      backdrop-filter: blur(6px);
    }

    .icon-btn{
      width:46px;height:46px;
      border-radius:16px;
      border:1px solid var(--btn-stroke);
      background: var(--btn-bg);
      display:grid;
      place-items:center;
      box-shadow: 0 10px 22px rgba(0,0,0,.18);
      cursor:pointer;
      padding:0;
    }

    /* Если используете <img> внутри кнопки */
    .icon-btn img{
      width:22px;height:22px;
      object-fit:contain;
      display:block;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }

    /* ЛОГОТИП: можно картинкой или svg */
    .brand img{
      height:22px;
      width:auto;
      display:block;
    }

    /* ===== Title ===== */
    .titlebar{
      padding: 10px 20px 6px;
    }
    .titlebar h1{
      margin:0;
      font-size: 40px;
      font-weight: 800;
      letter-spacing:.2px;
      line-height:1.05;
    }

    /* ===== Chat area ===== */
    .chat{
      flex:1;
      display:flex;
      flex-direction:column;
      min-height:0;
      padding: 0 16px;
    }

    .messages{
      flex:1;
      min-height:0;
      overflow:auto;
      padding: 8px 0 14px;
      -webkit-overflow-scrolling: touch;
      scroll-behavior:smooth;
    }
    .messages::-webkit-scrollbar{ width:8px; }
    .messages::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.18);
      border-radius: 10px;
    }

    .msg{
      margin: 18px 0;
      display:flex;
      flex-direction:column;
      gap:6px;
    }

    .msg.bot{ align-items:flex-start; }
    .msg.user{ align-items:flex-end; }

    .label{
      font-size: 11px;
      letter-spacing: .6px;
      text-transform: uppercase;
      color: rgba(255,255,255,.55);
      padding: 0 6px;
    }

    .bubble{
      max-width: 78%;
      padding: 14px 16px;
      border-radius: var(--radius);
      border: 1px solid var(--stroke);
      box-shadow: 0 10px 22px rgba(0,0,0,.14);
      backdrop-filter: blur(6px);
      line-height: 1.35;
      font-size: 16px;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .bot .bubble{
      background: var(--bubble-bot);
      border-bottom-left-radius: 10px;
    }

    .user .bubble{
      background: var(--bubble-user);
      border-color: rgba(255,255,255,.08);
      border-bottom-right-radius: 10px;
    }

    /* ===== Composer ===== */
    .composer{
      height: calc(var(--composer-h) + var(--safe-bottom));
      padding: 12px 16px calc(12px + var(--safe-bottom));
      display:flex;
      align-items:center;
      gap:12px;
    }

    .plus{
      width:54px;height:54px;
      border-radius: 16px;
      border: 1px solid var(--btn-stroke);
      background: rgba(255,255,255,.10);
      display:grid;
      place-items:center;
      box-shadow: 0 10px 22px rgba(0,0,0,.18);
      cursor:pointer;
      padding:0;
    }
    .plus img{
      width:22px;height:22px;
      display:block;
    }

    .input{
      flex:1;
      height:54px;
      border-radius: 18px;
      border: 1px solid var(--input-stroke);
      background: var(--input-bg);
      color: var(--text);
      outline:none;
      padding: 0 16px;
      font-size: 17px;
      box-shadow: 0 10px 22px rgba(0,0,0,.16);
    }
    .input::placeholder{ color: rgba(255,255,255,.70); }

    .send{
      width:56px;height:54px;
      border-radius: 18px;
      border:none;
      background: var(--bubble-user);
      box-shadow: 0 12px 24px rgba(0,0,0,.22);
      display:grid;
      place-items:center;
      cursor:pointer;
      padding:0;
    }
    .send img{
      width:22px;height:22px;
      display:block;
    }
    .send:disabled{
      filter: grayscale(.35) brightness(.9);
      cursor:not-allowed;
    }

    /* ===== Tablet landscape adaptation ===== */
    @media (min-width: 820px) and (orientation: landscape){
      .app{ align-items:center; }
      header,.titlebar,.chat,.composer{
        width: min(920px, 92vw);
      }
      .bubble{ max-width: 62%; }
      .titlebar h1{ font-size: 44px; }
    }

    @media (max-width: 360px){
      .titlebar h1{ font-size: 36px; }
      .bubble{ font-size: 15px; }
    }
  </style>
</head>

<body>
  <div class="app">

    <header>
      <!-- TODO: ИКОНКА БУРГЕРА
           Вставьте ваш SVG/PNG вместо assets/icon-burger.svg -->
      <button class="icon-btn" type="button" aria-label="Меню">
        <img src="Icon/Burger-menu.svg" alt="" />
      </button>

      <!-- TODO: ЛОГОТИП AEROFLOT
           Вставьте ваш логотип вместо assets/aeroflot-logo.svg -->
      <div class="brand" aria-label="Aeroflot">
        <img src="Logo/CMYK.svg" alt="AEROFLOT" />
      </div>
    </header>

    <div class="titlebar">
      <h1>Аэродруг</h1>
    </div>

    <main class="chat">
      <div id="messages" class="messages" role="log" aria-live="polite" aria-relevant="additions">
        <!-- Пример стартовых сообщений как на макете -->
        <div class="msg bot">
          <div class="label">АЭРОДРУГ</div>
          <div class="bubble">Привет, я Аэродруг, который будет с тобой во время полета</div>
        </div>

        <div class="msg user">
          <div class="label">Вы</div>
          <div class="bubble">Привет, а что ты умеешь?</div>
        </div>
      </div>

      <div class="composer">
        <!-- TODO: ИКОНКА ПЛЮСА
             Вставьте вашу иконку вместо assets/icon-plus.svg -->
        <button class="plus" type="button" aria-label="Добавить">
          <img src="Icon/Plus.svg" alt="" />
        </button>

        <input id="input" class="input" type="text" placeholder="Спроси меня" autocomplete="off" />

        <!-- TODO: ИКОНКА ОТПРАВКИ (стрелка вверх)
             Вставьте вашу иконку вместо assets/icon-send-up.svg -->
        <button id="send" class="send" type="button" aria-label="Отправить">
          <img src="Icon/TextButton/arrow-up_20x20.svg" alt="" />
        </button>
      </div>
    </main>

  </div>

  <script>
    const messagesEl = document.getElementById('messages');
    const inputEl = document.getElementById('input');
    const sendEl = document.getElementById('send');

    // Заготовленные ответы (демо)
    const canned = [
      {
        keys: ['умеешь', 'что ты', 'помощь', 'возможн', 'можеш'],
        answer:
          'Я демо-помощник “Аэродруг”. Могу подсказать по багажу, регистрации, выбору места, переносам и возвратам. Напишите тему, и я отвечу по сценарию.'
      },
      {
        keys: ['багаж', 'чемодан', 'ручн', 'вес', 'габарит'],
        answer:
          'По багажу всё зависит от тарифа и направления. Скажите маршрут и тариф (Эконом/Комфорт/Бизнес) — назову точные нормы.'
      },
      {
        keys: ['регистрац', 'онлайн', 'check', 'чекин', 'посадочн'],
        answer:
          'Онлайн-регистрация обычно открывается за сутки до вылета и закрывается за несколько часов. Назовите рейс и дату — подскажу точное окно и шаги.'
      }
    ];

    function normalize(s){
      return (s || '').toLowerCase().replace(/ё/g,'е').trim();
    }

    function pickAnswer(userText){
      const t = normalize(userText);
      for (const item of canned){
        if (item.keys.some(k => t.includes(k))) return item.answer;
      }
      return 'Понял. Уточните тему: багаж, регистрация, места, перенос рейса или возврат?';
    }

    function addMessage({from, text}){
      const msg = document.createElement('div');
      msg.className = `msg ${from}`;

      const label = document.createElement('div');
      label.className = 'label';
      label.textContent = (from === 'bot') ? 'АЭРОДРУГ' : 'Вы';

      const bubble = document.createElement('div');
      bubble.className = 'bubble';
      bubble.textContent = text;

      msg.appendChild(label);
      msg.appendChild(bubble);
      messagesEl.appendChild(msg);

      requestAnimationFrame(() => {
        messagesEl.scrollTop = messagesEl.scrollHeight;
      });
    }

    let busy = false;

    function send(){
      const text = inputEl.value.trim();
      if (!text || busy) return;

      addMessage({from:'user', text});
      inputEl.value = '';

      busy = true;
      sendEl.disabled = true;

      const answer = pickAnswer(text);

      // небольшая задержка как “ответ ИИ”
      const delay = Math.min(900 + answer.length * 8, 1800);
      setTimeout(() => {
        addMessage({from:'bot', text: answer});
        busy = false;
        sendEl.disabled = false;
        inputEl.focus();
      }, delay);
    }

    sendEl.addEventListener('click', send);
    inputEl.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') send();
    });

    window.addEventListener('load', () => {
      inputEl.focus();
      messagesEl.scrollTop = messagesEl.scrollHeight;
    });

    window.addEventListener('resize', () => {
      requestAnimationFrame(() => {
        messagesEl.scrollTop = messagesEl.scrollHeight;
      });
    });
  </script>
</body>
</html>

